;/*FB_PKG_DELIM*/

__d("IGDInboxSearchNullStateQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29250915284552410"}),null);
__d("IGDInboxSearchNullStateQuery$Parameters",["IGDInboxSearchNullStateQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("IGDInboxSearchNullStateQuery_instagramRelayOperation"),metadata:{},name:"IGDInboxSearchNullStateQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("IGDInboxSearch.entrypoint",["IGDInboxSearchNullStateQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{nullStateQueryRef:{parameters:c("IGDInboxSearchNullStateQuery$Parameters"),variables:a.nullStateQueryInput}}}},root:c("JSResourceForInteraction")("IGDInboxSearchResultContainer.react").__setRef("IGDInboxSearch.entrypoint")};g["default"]=a}),98);
__d("IGDInboxSearchInput.react",["fbt","IGDSCircleXPanoFilled24Icon.react","IGDSIconButton.react","IGDSSearchPanoOutlineIcon.react","IGDSSpinner.react","IGDSTextInput.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={searchInput:{fontSize:"xl565be",height:"x90ne7k",paddingTop:"xyqdw3p",paddingEnd:"x1pi30zi",paddingBottom:"xg8j3zb",paddingStart:"x1swvt13",":focus_outline":"x1uvtmcs",$$css:!0}},l=h._(/*BTDS*/"__JHASH__5ffi73Dc7zH__JHASH__"),m=h._(/*BTDS*/"__JHASH__NvSpNAk2wjq__JHASH__");function a(a){var b=d("react-compiler-runtime").c(16),e=a.isActive,f=a.isLoading,g=a.onClearSearch,h=a.onTextInputChange,i=a.onTextInputFocus,n=a.onTextInputKeyDown,o=a.query;a=a.textInputRef;var p;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==o?(p=o!==""&&e?f?j.jsx("div",babelHelpers["extends"]({className:"x1w0mnb"},{children:j.jsx(c("IGDSSpinner.react"),{size:"small"})})):j.jsx(c("IGDSIconButton.react"),{label:m,onClick:g,children:j.jsx(c("IGDSCircleXPanoFilled24Icon.react"),{alt:m,color:"ig-secondary-icon",size:14})}):null,b[0]=e,b[1]=f,b[2]=g,b[3]=o,b[4]=p):p=b[4];b[5]!==e?(f=e?null:j.jsx("div",babelHelpers["extends"]({className:"x1d52u69"},{children:j.jsx(c("IGDSSearchPanoOutlineIcon.react"),{alt:l,color:"ig-secondary-icon",size:16})})),b[5]=e,b[6]=f):f=b[6];o=(g=o)!=null?g:"";b[7]!==e||b[8]!==h||b[9]!==i||b[10]!==n||b[11]!==p||b[12]!==f||b[13]!==o||b[14]!==a?(g=j.jsx(c("IGDSTextInput.react"),{autoCapitalize:"none",autoComplete:"off",autoFocus:e,endAdornment:p,name:"searchInput",onChange:h,onFocus:i,onKeyDown:n,placeholder:l,ref:a,startAdornment:f,style:"borderless",value:o,xstyle:k.searchInput}),b[7]=e,b[8]=h,b[9]=i,b[10]=n,b[11]=p,b[12]=f,b[13]=o,b[14]=a,b[15]=g):g=b[15];return g}g["default"]=a}),226);
__d("IGDInboxSearchResultPlaceholders.react",["IGDSBox.react","IGDSListItemPlaceholder.react","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=d("PolarisUA").isMobile(),a[0]=b):b=a[0];var e=b;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("IGDSBox.react"),{flex:"shrink",marginTop:3,overflow:"hidden",children:Array(10).fill(0).map(function(a,b){return i.jsx(c("IGDSListItemPlaceholder.react"),{color:"elevatedHighlightBackground",fullWidth:!0,index:b,paddingX:e?4:6,size:"large"},"igd-inbox-search-result-placeholder-"+b)})}),a[1]=b):b=a[1];return b}g["default"]=a}),98);
__d("IGDInboxSearchUtils",["fbt","IGDFallbackProfileUrl","intlList","polarisNormalizeDirectThreads","polarisNormalizeDirectUsers"],(function(a,b,c,d,e,f,g,h){"use strict";var i={input:{count_per_page:20,is_private_share:!1,views:["RESHARE_SHARE_SHEET"]}};function a(a){a=a.ranked_recipients;var b={groups:[],users:[]};if(a==null)return b;a.forEach(function(a){if(a.user){var e=d("polarisNormalizeDirectUsers").normalizeDirectUsers([a.user]);e=e.entities;b.users.push(e.users[a.user.pk])}else if(a.thread){e=c("polarisNormalizeDirectThreads")([a.thread]);var f=e.entities;e=f.threads[a.thread.thread_id];a=e.users.map(function(a){return f.users[a]});b.groups.push({thread:e,users:a})}});return b}function b(a){return a.message_search_results.message_search_result_items.map(function(a){var b=c("polarisNormalizeDirectThreads")([a.thread]),d=b.entities;b=d.threads[a.thread.thread_id];var e=b.users.map(function(a){return d.users[a]});return{matched_message_info:a.matched_message_info,thread:b,users:e}})}function e(a){var b=c("polarisNormalizeDirectThreads")([a.thread]);b=b.entities;var d=b.threads[a.thread.thread_id];b=b.users;return{hasMore:a.has_more,matches:a.in_thread_content_results,nextOffset:a.next_offset,thread:d,users:b}}function f(a,b){var c=[];if((b==null?void 0:b.thread_image_url)!=null)c.push(b.thread_image_url);else if(a.length===1){c.push((b=a[0].profile_pic_url)!=null?b:d("IGDFallbackProfileUrl").FALLBACK_PROFILE_PIC_URL)}else if(a.length>1){c.push((b=a[0].profile_pic_url)!=null?b:d("IGDFallbackProfileUrl").FALLBACK_PROFILE_PIC_URL,(b=a[1].profile_pic_url)!=null?b:d("IGDFallbackProfileUrl").FALLBACK_PROFILE_PIC_URL)}else c.push(d("IGDFallbackProfileUrl").FALLBACK_PROFILE_PIC_URL);return c}function j(a){if(a.length===0)return"";var b=2,d=c("intlList")(a.slice(0,b),c("intlList").CONJUNCTIONS.NONE,c("intlList").DELIMITERS.COMMA);if(a.length<3)return d;else{a=a.length-b;return h._(/*BTDS*/"__JHASH__dLxC_nHZ6Fd__JHASH__",[h._param("number",a,[0,a]),h._param("name",d)])}}function k(a){return a.messages.length===0&&a.recipients.users.length===0&&a.recipients.groups.length===0}g.DEFAULT_NULL_STATE_QUERY_INPUT=i;g.normalizeRankedRecipientResponse=a;g.normalizeMessageSearchResponse=b;g.normalizeInThreadMessageSearchResponse=e;g.getResultListItemIconUrls=f;g.getUserListContextLine=j;g.isEmptySearchResult=k}),226);
__d("XPolarisIGXAPIDirectRankedRecipientsControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/api/v1/direct_v2/ranked_recipients/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("XPolarisIGXAPIDirectSearchSecondaryControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/api/v1/direct_v2/search_secondary/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useIGDInboxSearch",["IGDInboxSearchUtils","IGDThreadListNewMessageLoggingDataContext","MessengerWebUXLogger","PolarisConfig","Promise","XPolarisIGXAPIDirectRankedRecipientsControllerRouteBuilder","XPolarisIGXAPIDirectSearchSecondaryControllerRouteBuilder","cometAsyncFetch","getAsyncParams","promiseDone","react","react-compiler-runtime","useDebounced"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useRef;function k(a){var b=c("getAsyncParams")("GET");return c("cometAsyncFetch")(c("XPolarisIGXAPIDirectRankedRecipientsControllerRouteBuilder").buildURL({mode:"universal",query:a.query,show_threads:a.show_threads}),{data:babelHelpers["extends"]({},b),method:"GET",requestHeaders:{"X-IG-App-ID":d("PolarisConfig").getIGAppID()}})}function l(a){var b=c("getAsyncParams")("GET");return c("cometAsyncFetch")(c("XPolarisIGXAPIDirectSearchSecondaryControllerRouteBuilder").buildURL({offsets:a.offsets,query:a.query,result_types:a.result_types}),{data:babelHelpers["extends"]({},b),method:"GET",requestHeaders:{"X-IG-App-ID":d("PolarisConfig").getIGAppID()}})}function a(){var a=d("react-compiler-runtime").c(5),e=j(""),f=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),g=c("MessengerWebUXLogger").useInteractionLogger(),i;a[0]!==f||a[1]!==g?(i=function(a,i,j){var m=(h||(h=b("Promise"))).allSettled([k({mode:"universal",query:a,show_threads:"true"}),l({offsets:JSON.stringify({message_content:0}),query:a,result_types:JSON.stringify(["message_content"])})]);g==null?void 0:g({eventName:"igd_universal_search_query_sent",extraData:{query_type:"main_search"},flowInstanceId:f});c("promiseDone")(m.then(function(b){var c={messages:[],recipients:{groups:[],users:[]}};if(a===e.current){i(!1);var f=b[0];b=b[1];if(f.status==="fulfilled"){f=f.value;c.recipients=d("IGDInboxSearchUtils").normalizeRankedRecipientResponse(f)}if(b.status==="fulfilled"){f=b.value;c.messages=d("IGDInboxSearchUtils").normalizeMessageSearchResponse(f)}j(c)}},function(b){a===e.current&&(j({messages:[],recipients:{groups:[],users:[]}}),i(!1))}))},a[0]=f,a[1]=g,a[2]=i):i=a[2];var m=c("useDebounced")(i,500);a[3]!==m?(i=function(a,b,c){if(a===""||a===e.current)return;b(!0);e.current=a;m(a,b,c)},a[3]=m,a[4]=i):i=a[4];return i}g["default"]=a}),98);
__d("useIGDInboxSearchResultItemHandlers",["I64","IGDNavigation","MWPActor.react","react","react-compiler-runtime","useMWJumpToMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(15),f=d("IGDNavigation").useIGDNavigation(),g=c("useMWJumpToMessage")("Search"),h=(i||(i=d("I64"))).to_string(d("MWPActor.react").useActor()),j;e[0]!==h||e[1]!==g||e[2]!==f||e[3]!==b?(j=function(a){if(a.matched_message_info.item_info!=null){var c;c=a.thread.is_group?a.thread.id:a.users.length===0?h:(c=(c=(c=a.users.find(function(b){return b.id!==a.thread.viewer_id}))==null?void 0:c.interop_messaging_user_fbid)!=null?c:a.users[0].interop_messaging_user_fbid)!=null?c:"";f.openInbox({threadKey:(i||(i=d("I64"))).of_string(c),threadType:a.thread.is_group?(i||(i=d("I64"))).of_int32(2):(i||(i=d("I64"))).of_int32(1)},"inboxSearch");g((c=(c=a.matched_message_info.item_info)==null?void 0:c.mid)!=null?c:"",i.of_float((c=(c=a.matched_message_info.item_info)==null?void 0:c.timestamp)!=null?c:0))}else b(a.thread.id)},e[0]=h,e[1]=g,e[2]=f,e[3]=b,e[4]=j):j=e[4];j=j;var k;e[5]!==a||e[6]!==f?(k=function(b){f.openInbox({threadKey:(i||(i=d("I64"))).of_string(b),threadType:i.of_int32(2)},"inboxSearch"),a()},e[5]=a,e[6]=f,e[7]=k):k=e[7];k=k;var l;e[8]!==a||e[9]!==f?(l=function(b){f.openInbox({threadKey:(i||(i=d("I64"))).of_string(b),threadType:i.of_int32(1)},"inboxSearch"),a()},e[8]=a,e[9]=f,e[10]=l):l=e[10];l=l;var m;e[11]!==k||e[12]!==j||e[13]!==l?(m={onGroupThreadClick:k,onMessageClick:j,onOneToOneThreadClick:l},e[11]=k,e[12]=j,e[13]=l,e[14]=m):m=e[14];return m}g["default"]=a}),98);
__d("IGDInboxSearch.react",["fbt","CometPlaceholder.react","CometRelay","IGDInboxSearch.entrypoint","IGDInboxSearchInput.react","IGDInboxSearchResultPlaceholders.react","IGDInboxSearchUtils","IGDIsCompactModeContext.react","IGDProfessionalIGFolderContext.react","IGDSBox.react","IGDSChevronLeftPanoOutlineIcon.react","IGDSIconButton.react","IGDSTextVariants.react","IGDThreadListNewMessageLoggingDataContext","Keys","Locale","MessengerWebUXLogger","PolarisUA","react","useCometRelayEntrypointContextualEnvironmentProvider","useIGDInboxSearch","useIGDInboxSearchResultItemHandlers","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState,o={searchContainer:{marginBottom:"xod5an3",marginTop:"x14vqqas",$$css:!0},searchInput:{pointerEvents:"x47corl",$$css:!0}},p=h._(/*BTDS*/"__JHASH__pTxiz4D0VwH__JHASH__");function a(a){var b=a.isActive,e=a.setIsActive;a=d("IGDProfessionalIGFolderContext.react").useIsProfessionalIGD();var f=n(""),g=f[0],h=f[1];f=n(!1);var i=f[0],q=f[1];f=n();var r=f[0],s=f[1],t=m(),u=c("usePrevious")(g),v=c("useIGDInboxSearch")();l(function(){g.trim()!==(u==null?void 0:u.trim())&&v(g,q,s)},[g,q,v,u]);f=n();var w=f[0],x=f[1];f=c("useCometRelayEntrypointContextualEnvironmentProvider")();f=d("CometRelay").useEntryPointLoader(f,c("IGDInboxSearch.entrypoint"));var y=f[0],z=f[1];b&&y==null&&z({nullStateQueryInput:d("IGDInboxSearchUtils").DEFAULT_NULL_STATE_QUERY_INPUT});var A=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),B=c("MessengerWebUXLogger").useInteractionLogger();f=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"igd_universal_search_rendered",flowInstanceId:A});var C=k(function(){e(!0),y==null&&z({nullStateQueryInput:d("IGDInboxSearchUtils").DEFAULT_NULL_STATE_QUERY_INPUT}),b||(B==null?void 0:B({eventName:"igd_universal_search_activated",flowInstanceId:A}))},[y,A,B,b,z,e]),D=k(function(a){a=(a=a==null?void 0:a.target.value)!=null?a:"";a.trim()!==(u==null?void 0:u.trim())&&s(null);h(a)},[h,u]),E=function(a){a.keyCode===c("Keys").ESC&&G()},F=function(){h("")},G=k(function(){var a;(a=t.current)==null?void 0:a.focus();window.requestAnimationFrame(function(){var a;h("");s(null);e(!1);q(!1);x(null);(a=t.current)==null?void 0:a.blur()});B==null?void 0:B({eventName:"igd_universal_search_deactivated",flowInstanceId:A})},[A,B,e]),H=function(){J?(x(null),q(!1)):G()},I=c("useIGDInboxSearchResultItemHandlers")(G,x),J=w!=null;H=b?j.jsx(c("IGDSIconButton.react"),{label:p,onClick:H,padding:0,children:j.jsx("span",{className:c("Locale").isRTL()?"x19jd1h0":null,children:j.jsx(c("IGDSChevronLeftPanoOutlineIcon.react"),{alt:p,color:"ig-primary-text",size:24})})}):null;F=J?j.jsx(c("IGDSBox.react"),{flex:"grow",justifyContent:"center",minHeight:40,xstyle:o.searchInput,children:j.jsx(d("IGDSTextVariants.react").IGDSTextLabelEmphasized,{elementType:"h2",zeroMargin:!0,children:g})}):j.jsx(c("IGDInboxSearchInput.react"),{isActive:b,isLoading:i,onClearSearch:F,onTextInputChange:D,onTextInputFocus:C,onTextInputKeyDown:E,query:g,textInputRef:t});D=b&&y!=null?j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx(c("IGDInboxSearchResultPlaceholders.react"),{}),children:j.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:y,props:babelHelpers["extends"]({isLoading:i,query:g,results:r,threadKey:w},I)})}):null;C=d("IGDIsCompactModeContext.react").useIsCompactMode();return C?null:j.jsxs(c("IGDSBox.react"),{containerRef:f,flex:b?"grow":"shrink",minHeight:40,width:d("PolarisUA").isMobile()?"100%":397,xstyle:a&&o.searchContainer,children:[j.jsxs(c("IGDSBox.react"),{columnGap:2,direction:"row",paddingX:4,children:[H,F]}),D]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);